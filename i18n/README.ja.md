[English](../README.md) Â· [Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©](README.ar.md) Â· [EspaÃ±ol](README.es.md) Â· [FranÃ§ais](README.fr.md) Â· [æ—¥æœ¬èª](README.ja.md) Â· [í•œêµ­ì–´](README.ko.md) Â· [Tiáº¿ng Viá»‡t](README.vi.md) Â· [ä¸­æ–‡ (ç®€ä½“)](README.zh-Hans.md) Â· [ä¸­æ–‡ï¼ˆç¹é«”ï¼‰](README.zh-Hant.md) Â· [Deutsch](README.de.md) Â· [Ğ ÑƒÑÑĞºĞ¸Ğ¹](README.ru.md)


[![LazyingArt banner](https://github.com/lachlanchen/lachlanchen/raw/main/figs/banner.png)](https://github.com/lachlanchen/lachlanchen/blob/main/figs/banner.png)

# ğŸ™ï¸ JavaScriptå‘ã‘éŸ³å£°ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£æ¤œå‡º

[![npm vad-web](https://img.shields.io/npm/v/@ricky0123/vad-web?color=0b69d7&label=%40ricky0123%2Fvad-web&style=flat-square)](https://www.npmjs.com/package/@ricky0123/vad-web)
[![npm vad-react](https://img.shields.io/npm/v/@ricky0123/vad-react?color=0b69d7&label=%40ricky0123%2Fvad-react&style=flat-square)](https://www.npmjs.com/package/@ricky0123/vad-react)
[![Docs](https://img.shields.io/badge/docs-vad.ricky0123.com-0a7f5a?style=flat-square)](https://docs.vad.ricky0123.com/)
[![Demo](https://img.shields.io/badge/demo-live-ff8c00?style=flat-square)](https://www.vad.ricky0123.com)
[![Monorepo](https://img.shields.io/badge/repo-monorepo-111827?style=flat-square)](https://github.com/ricky0123/vad)
[![Discord](https://img.shields.io/badge/discord-community-5865F2?style=flat-square&logo=discord&logoColor=white)](https://discord.gg/4WPeGEaSpF)
[![License: ISC](https://img.shields.io/badge/license-ISC-2ea44f?style=flat-square)](LICENSE)

> æ•°è¡Œã®ã‚³ãƒ¼ãƒ‰ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè©±ã‚’å«ã‚€éŸ³å£°åŒºé–“ã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚

ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§å‹•ä½œã™ã‚‹æ­£ç¢ºã§ä½¿ã„ã‚„ã™ã„éŸ³å£°ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£æ¤œå‡ºï¼ˆVADï¼‰ã‚’æä¾›ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã€ãƒã‚¤ã‚¯æ¨©é™ã®å–å¾—ã€éŒ²éŸ³ã®é–‹å§‹ã€ç™ºè©±ã‚’å«ã‚€éŸ³å£°åŒºé–“ã‚’ã‚µãƒ¼ãƒãƒ¼ã¸é€ä¿¡ã€ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè©±ã—ã¦ã„ã‚‹ã¨ãã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã‚’è¡¨ç¤ºã§ãã¾ã™ã€‚ãªãŠã€ãƒ–ãƒ©ã‚¦ã‚¶ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«é›†ä¸­ã™ã‚‹ãŸã‚ã€[Node ã‚µãƒãƒ¼ãƒˆã‚’ä¸­æ­¢](#node-support--oct-2024-)ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

| æ¦‚è¦ | è©³ç´° |
| --- | --- |
| ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | `@ricky0123/vad-web`, `@ricky0123/vad-react` |
| ä¸»ãªå®Ÿè¡Œç’°å¢ƒ | ãƒ–ãƒ©ã‚¦ã‚¶ (`WebAudio` + `getUserMedia`) |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | [docs.vad.ricky0123.com](https://docs.vad.ricky0123.com/) |
| ãƒ©ã‚¤ãƒ–ãƒ‡ãƒ¢ | [vad.ricky0123.com](https://www.vad.ricky0123.com) |

## ç›®æ¬¡

- [ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯ ğŸ”—](#ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯-)
- [æ¦‚è¦ ğŸ§­](#æ¦‚è¦-)
- [æ©Ÿèƒ½ âœ¨](#æ©Ÿèƒ½-)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ ğŸ—‚ï¸](#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ-)
- [äº’æ›æ€§ãƒãƒˆãƒªã‚¯ã‚¹ ğŸ§©](#äº’æ›æ€§ãƒãƒˆãƒªã‚¯ã‚¹-)
- [å‰ææ¡ä»¶ âœ…](#å‰ææ¡ä»¶-)
- [ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« ğŸ“¦](#ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«-)
- [ä½¿ã„æ–¹ ğŸš€](#ä½¿ã„æ–¹-)
- [è¨­å®š âš™ï¸](#è¨­å®š-)
- [ã‚µãƒ³ãƒ—ãƒ« ğŸ§ª](#ã‚µãƒ³ãƒ—ãƒ«-)
- [é–‹ç™ºãƒ¡ãƒ¢ ğŸ› ï¸](#é–‹ç™ºãƒ¡ãƒ¢-)
- [CI ã¨å“è³ªã‚²ãƒ¼ãƒˆ ğŸ§±](#ci-ã¨å“è³ªã‚²ãƒ¼ãƒˆ-)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° ğŸ©º](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°-)
- [ã‚¹ãƒãƒ³ã‚µãƒ¼ã‚·ãƒƒãƒ— â¤ï¸](#ã‚¹ãƒãƒ³ã‚µãƒ¼ã‚·ãƒƒãƒ—-)
- [â¤ï¸ Support](#--support)
- [Node ã‚µãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹é‡è¦ãªãŠçŸ¥ã‚‰ã› - 2024å¹´10æœˆ ğŸ“¢](#node-ã‚µãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹é‡è¦ãªãŠçŸ¥ã‚‰ã›---2024å¹´10æœˆ-)
- [ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— ğŸ›£ï¸](#ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—-)
- [ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ğŸ¤](#ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³-)
- [å‚ç…§ ğŸ“š](#å‚ç…§-)
- [ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ ğŸ“„](#ãƒ©ã‚¤ã‚»ãƒ³ã‚¹-)

## ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯ ğŸ”—

| ãƒªã‚½ãƒ¼ã‚¹ | ãƒªãƒ³ã‚¯ |
| --- | --- |
| ãƒ©ã‚¤ãƒ–ãƒ‡ãƒ¢ | [vad.ricky0123.com](https://www.vad.ricky0123.com) |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | [docs.vad.ricky0123.com](https://docs.vad.ricky0123.com/) |
| Discord | [ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«å‚åŠ ](https://discord.gg/4WPeGEaSpF) |
| ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ | [ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’å…±æœ‰](https://uaux2a2ppfv.typeform.com/to/iJG2gCQv) |
| ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ | [é–‹ç™ºè€…ã‚¬ã‚¤ãƒ‰](https://docs.vad.ricky0123.com/developer-guide/hacking/) |

- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚½ãƒ¼ã‚¹ã¯ `./docs` ã«ã‚ã‚Šã¾ã™ã€‚
- è²¢çŒ®ã‚’å§‹ã‚ã‚‹å ´æ‰€ã¯ [é–‹ç™ºè€…ãƒãƒƒã‚­ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰](https://docs.vad.ricky0123.com/developer-guide/hacking/) ã§ã™ã€‚ã”è³ªå•ã¯ issue ã‚„ Discord ã§å—ã‘ä»˜ã‘ã¦ã„ã¾ã™ã€‚

è£å´ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ [Silero VAD](https://github.com/snakers4/silero-vad) [[1]](#å‚ç…§-) ã‚’ [ONNX Runtime Web](https://github.com/microsoft/onnxruntime/tree/main/js/web) ã§å®Ÿè¡Œã—ã¦ã„ã¾ã™ï¼ˆéå»ã® Node ã‚µãƒãƒ¼ãƒˆæ™‚ä»£ã«ã¯ ONNX Runtime Node.js å‚ç…§ã‚‚ã‚ã‚Šã¾ã—ãŸï¼‰ã€‚ã“ã®å®Ÿç¾ã‚’æ”¯æ´ã—ã¦ãã‚ŒãŸçš†ã•ã‚“ã«æ„Ÿè¬ã—ã¾ã™ã€‚

i18n ã®çŠ¶æ³ã«ã¤ã„ã¦: `i18n/` ã«ã¯ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸Šéƒ¨ã®è¨€èªãƒªãƒ³ã‚¯ã§ç¤ºã™ç¿»è¨³ç‰ˆ README ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## æ¦‚è¦ ğŸ§­

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¯ã€å…¬é–‹æ¸ˆã¿ã®ä¸»è¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’2ã¤å«ã‚€ãƒ¢ãƒãƒ¬ãƒã§ã™ã€‚

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ç›®çš„ |
| --- | --- |
| `@ricky0123/vad-web` | `MicVAD`ã€`AudioNodeVAD`ã€`NonRealTimeVAD` ã‚’å«ã‚€ãƒ–ãƒ©ã‚¦ã‚¶ API |
| `@ricky0123/vad-react` | `vad-web` å‘ã‘ã® React ãƒ•ãƒƒã‚¯ãƒ©ãƒƒãƒ‘ãƒ¼ (`useMicVAD`) |

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§ã€æ¬¡ã®æ©Ÿèƒ½ã‚’å«ã¿ã¾ã™ã€‚

- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ãƒã‚¤ã‚¯åŒºé–“åˆ†å‰²ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼ˆ`onSpeechStart`ã€`onSpeechEnd`ã€`onVADMisfire` ãªã©ï¼‰
- èª¿æ•´å¯èƒ½ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é–¾å€¤ã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶å¾¡
- ãƒ¬ã‚¬ã‚·ãƒ¼ãŠã‚ˆã³ v5 Silero ãƒ¢ãƒ‡ãƒ«ã®ã‚µãƒãƒ¼ãƒˆ
- ãƒ‡ãƒ¢ãƒ»ãƒ†ã‚¹ãƒˆã‚¢ãƒ—ãƒªã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚µã‚¤ãƒˆã®ã‚½ãƒ¼ã‚¹

## æ©Ÿèƒ½ âœ¨

- Silero ONNX ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã® VAD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
- script ã‚¿ã‚°ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã€React ã§åˆ©ç”¨å¯èƒ½
- å®Ÿç”¨çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒã‚¤ã‚¯ã‚¹ãƒˆãƒªãƒ¼ãƒ åˆ¶ç´„
- ã‚¹ãƒˆãƒªãƒ¼ãƒ ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’ä¸Šæ›¸ãå¯èƒ½ï¼ˆ`getStream`ã€`pauseStream`ã€`resumeStream`ï¼‰
- `NonRealTimeVAD` ã«ã‚ˆã‚‹äº‹å‰éŒ²éŸ³éŸ³å£°ã®éãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒºé–“åˆ†å‰²
- `baseAssetPath` ã¨ `onnxWASMBasePath` ã«ã‚ˆã‚‹ãƒ¢ãƒ‡ãƒ«/ã‚¢ã‚»ãƒƒãƒˆã®èª­ã¿è¾¼ã¿è¨­å®š
- çµ„ã¿è¾¼ã¿ãƒ©ãƒƒãƒ‘ãƒ¼ã§ãƒ¬ã‚¬ã‚·ãƒ¼ã¨ v5 ã®ãƒ¢ãƒ‡ãƒ«çŠ¶æ…‹å‡¦ç†ã‚’ã‚µãƒãƒ¼ãƒˆ
- script ã‚¿ã‚°ã€webpack ãƒ™ãƒ¼ã‚¹ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã€React ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã€Next.js ã®ä¾‹ã‚’å«ã‚€

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ ğŸ—‚ï¸

```text
.
â”œâ”€â”€ README.md
â”œâ”€â”€ docs/                     # docs.vad.ricky0123.com ã® MkDocs ã‚½ãƒ¼ã‚¹
â”œâ”€â”€ examples/                 # script-tag, bundler, react-bundler, nextjs ã®ä¾‹
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ web/                  # @ricky0123/vad-web
â”‚   â””â”€â”€ react/                # @ricky0123/vad-react
â”œâ”€â”€ scripts/                  # é–‹ç™ºãƒ˜ãƒ«ãƒ‘ãƒ¼
â”œâ”€â”€ test-site/                # ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰
â”œâ”€â”€ i18n/                     # ç¿»è¨³æ¸ˆã¿ README
â”œâ”€â”€ silero_vad_legacy.onnx
â””â”€â”€ silero_vad_v5.onnx
```

ã‚ˆã‚Šè©³ç´°ãªä¸»ãªãƒ‘ã‚¹:

- `packages/web/src/real-time-vad.ts`: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®ãƒã‚¤ã‚¯ / ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒãƒ¼ãƒ‰ VAD ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- `packages/web/src/non-real-time-vad.ts`: äº‹å‰éŒ²éŸ³éŸ³å£°ã®éåŒæœŸåŒºé–“åˆ†å‰²
- `packages/web/src/frame-processor.ts`: é–¾å€¤å‡¦ç†ã¨ç™ºè©±åŒºé–“å¢ƒç•Œãƒ­ã‚¸ãƒƒã‚¯
- `packages/react/src/index.ts`: `useMicVAD` ã® React ãƒ•ãƒƒã‚¯ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨çŠ¶æ…‹ãƒ©ãƒƒãƒ‘ãƒ¼

## äº’æ›æ€§ãƒãƒˆãƒªã‚¯ã‚¹ ğŸ§©

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | å®Ÿè¡Œç’°å¢ƒ |
| --- | --- |
| `@ricky0123/vad-web` | WebAudio + `MediaDevices.getUserMedia` ã‚’å‚™ãˆãŸãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ |
| `@ricky0123/vad-react` | React ã‚¢ãƒ—ãƒª (`react` / `react-dom` >= 16.8.0) |
| Docs toolchain | Python 3.10 + Poetryï¼ˆCI ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æº–æ‹ ï¼‰ |
| CI Node runtime | Node 18ï¼ˆãƒªãƒã‚¸ãƒˆãƒªãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æº–æ‹ ï¼‰ |

ãƒªãƒã‚¸ãƒˆãƒªã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ™‚ç‚¹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆ`packages/*/package.json`ï¼‰:

- `@ricky0123/vad-web@0.0.27`
- `@ricky0123/vad-react@0.0.33`

## å‰ææ¡ä»¶ âœ…

- ãƒ–ãƒ©ã‚¦ã‚¶åˆ©ç”¨: `MediaDevices.getUserMedia` ã‚’åˆ©ç”¨ã§ãã‚‹ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶
- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º: Node.js + npm ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé–‹ç™º: Python + Poetryï¼ˆMkDocs ãƒ“ãƒ«ãƒ‰ç”¨ï¼‰

CI è¨­å®šã«åŸºã¥ãæ¨å¥¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³:

- Node.js 18.x
- Python 3.10.x

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« ğŸ“¦

ãƒ–ãƒ©ã‚¦ã‚¶å‘ã‘ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:

```bash
npm i @ricky0123/vad-web
```

React ãƒ©ãƒƒãƒ‘ãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«:

```bash
npm i @ricky0123/vad-react
```

ãƒ¢ãƒãƒ¬ãƒä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ï¼‰:

```bash
npm install
```

## ä½¿ã„æ–¹ ğŸš€

### ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆscript ã‚¿ã‚°ï¼‰

ãƒ–ãƒ©ã‚¦ã‚¶ã§ VAD ã‚’ script ã‚¿ã‚°ã¨ã—ã¦ä½¿ã†ã«ã¯ã€æ¬¡ã®ã‚¿ã‚°ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚

```html
<script src="https://cdn.jsdelivr.net/npm/onnxruntime-web@1.22.0/dist/ort.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.27/dist/bundle.min.js"></script>
<script>
  async function main() {
    const myvad = await vad.MicVAD.new({
      onSpeechStart: () => {
        console.log("Speech start detected")
      },
      onSpeechEnd: (audio) => {
        // do something with `audio` (Float32Array of audio samples at sample rate 16000)...
      },
      onnxWASMBasePath: "https://cdn.jsdelivr.net/npm/onnxruntime-web@1.22.0/dist/",
      baseAssetPath: "https://cdn.jsdelivr.net/npm/@ricky0123/vad-web@0.0.27/dist/",
    })
    myvad.start()
  }
  main()
</script>
```

### ãƒ–ãƒ©ã‚¦ã‚¶ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ©ç”¨ï¼ˆãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼‰

```ts
import { MicVAD } from "@ricky0123/vad-web"

const myvad = await MicVAD.new({
  onSpeechEnd: (audio) => {
    console.log("Speech segment length:", audio.length)
  },
})

myvad.start()
```

### React åˆ©ç”¨

```tsx
import { useMicVAD } from "@ricky0123/vad-react"

export function MyComponent() {
  const vad = useMicVAD({
    onSpeechEnd: (audio) => {
      console.log("User stopped talking", audio.length)
    },
  })

  return <div>{vad.userSpeaking ? "User is speaking" : "Idle"}</div>
}
```

### éãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ©ç”¨ï¼ˆãƒãƒƒãƒéŸ³å£°ï¼‰

```ts
import { NonRealTimeVAD } from "@ricky0123/vad-web"

const myvad = await NonRealTimeVAD.new()
for await (const { audio, start, end } of myvad.run(audioData, sampleRate)) {
  console.log({ start, end, samples: audio.length })
}
```

## è¨­å®š âš™ï¸

å„ API å…±é€šã®ä¸»ãªè¨­å®šé …ç›®:

- `positiveSpeechThreshold`ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  API ã®æ—¢å®šå€¤ã¯ç´„ `0.3`ï¼‰
- `negativeSpeechThreshold`ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  API ã®æ—¢å®šå€¤ã¯ç´„ `0.25`ï¼‰
- `redemptionMs`ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  API ã®æ—¢å®šå€¤ã¯ç´„ `1400`ï¼‰
- `preSpeechPadMs`ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  API ã®æ—¢å®šå€¤ã¯ç´„ `800`ï¼‰
- `minSpeechMs`ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  API ã®æ—¢å®šå€¤ã¯ç´„ `400`ï¼‰

ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  APIï¼ˆ`MicVAD`ã€`useMicVAD`ï¼‰ã§ã¯æ¬¡ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¾ã™:

- `getStream`, `pauseStream`, `resumeStream`
- `onFrameProcessed`, `onSpeechStart`, `onSpeechRealStart`, `onSpeechEnd`, `onVADMisfire`
- `submitUserSpeechOnPause`
- `model`ï¼ˆ`"legacy"` ã¾ãŸã¯ `"v5"`ï¼‰
- `baseAssetPath` ã¨ `onnxWASMBasePath`
- `workletOptions`

å®Œå…¨ãª API è¡¨ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§: [API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://docs.vad.ricky0123.com/user-guide/api/) ã¨ [ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚¬ã‚¤ãƒ‰](https://docs.vad.ricky0123.com/user-guide/algorithm/)ã€‚

### è¨­å®šãƒ¬ã‚·ãƒ”: ãƒ¢ãƒ‡ãƒ«ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚»ãƒƒãƒˆã‚’ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆã™ã‚‹

CDN ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä½¿ã‚ãªã„å ´åˆã€ã‚¢ãƒ—ãƒªã§æ¬¡ã‚’é…ä¿¡ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- `silero_vad_legacy.onnx` ãŠã‚ˆã³/ã¾ãŸã¯ `silero_vad_v5.onnx`
- `vad.worklet.bundle.min.js`
- `onnxruntime-web` ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.wasm`ã€æ–°ã—ã„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ“ãƒ«ãƒ‰å‘ã‘ã® `.mjs`ï¼‰

ãã®ã†ãˆã§è¨­å®šã—ã¾ã™ã€‚

```ts
const vad = await MicVAD.new({
  baseAssetPath: "/assets/vad/",
  onnxWASMBasePath: "/assets/onnxruntime/",
  onSpeechEnd: (audio) => {
    // handle audio segment
  },
})
```

## ã‚µãƒ³ãƒ—ãƒ« ğŸ§ª

ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ä¾‹:

- `examples/script-tags`: åŸºæœ¬çš„ãª script ã‚¿ã‚°æ§‹æˆ
- `examples/bundler`: webpack + `@ricky0123/vad-web`
- `examples/react-bundler`: webpack + `@ricky0123/vad-react`
- `examples/nextjs`: Next.js çµ±åˆä¾‹

`examples/bundler` ã®ã‚³ãƒãƒ³ãƒ‰ä¾‹:

```bash
npm run build && npm run start
```

ãƒ–ãƒ©ã‚¦ã‚¶å‘ã‘ã® voice activity detector ã®ãƒãƒ³ãƒ‰ãƒ«æ–¹æ³•ã€ã¾ãŸã¯ node / React ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®åˆ©ç”¨æ–¹æ³•ã¯ [vad.ricky0123.com](https://www.vad.ricky0123.com) ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚Šã¾ã™ã€‚

## é–‹ç™ºãƒ¡ãƒ¢ ğŸ› ï¸

ãƒ«ãƒ¼ãƒˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ:

```bash
npm run build
npm run test
npm run test:coverage
npm run typecheck
npm run format-check
npm run dev
```

å„ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜:

- `npm run build`: ã™ã¹ã¦ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’ãƒ“ãƒ«ãƒ‰
- `npm run test`: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
- `npm run test:coverage`: `packages/web` ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å®Ÿæ–½
- `npm run typecheck`: packagesã€test-siteã€tests ã® TypeScript ã‚’æ¤œæŸ»
- `npm run format-check`: `packages`ã€`examples`ã€`test-site` é…ä¸‹ã® TS/TSX ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æ¤œæŸ»
- `npm run dev`: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ test-site ã®ã‚½ãƒ¼ã‚¹ã‚’ç›£è¦–ã—ã€å†ãƒ“ãƒ«ãƒ‰ã—ã¦ `test-site/dist` ã‚’æä¾›

Docs ãƒ“ãƒ«ãƒ‰ï¼ˆMkDocs + Poetryï¼‰:

```bash
poetry install
poetry run mkdocs serve
```

è£œè¶³:

- `./test-site/build.sh` ã¯å¿…è¦ãª VAD / ONNX Runtime ã‚¢ã‚»ãƒƒãƒˆã‚’ `test-site/dist` ã¨ `test-site/dist/subpath` ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™
- `./scripts/dev.sh` ã¯ `nodemon` + `live-server` ã‚’ä½¿ç”¨ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å†ãƒ“ãƒ«ãƒ‰ã¨é…ä¿¡ã®ãƒ«ãƒ¼ãƒ—ã‚’ãƒãƒ¼ãƒˆ `8080` ä¸Šã§è¡Œã„ã¾ã™
- `./check_vad_up_to_date.sh` ã¯éå»ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã€`silero_vad.onnx` ã‚’å‚ç…§ã—ã¦ã„ã¾ã™ï¼ˆã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ `silero_vad_legacy.onnx` ã¨ `silero_vad_v5.onnx` ãŒé…å‚™ï¼‰

## CI ã¨å“è³ªã‚²ãƒ¼ãƒˆ ğŸ§±

`.github/workflows/` ã® GitHub ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼:

- ãƒ†ã‚¹ãƒˆ (`test.yml`)
- å‹ãƒã‚§ãƒƒã‚¯ (`typecheck.yml`)
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ (`format-check.yml`)
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ“ãƒ«ãƒ‰/ãƒ‡ãƒ—ãƒ­ã‚¤ (`docs.yml`)
- å…¬é–‹ãƒ•ãƒ­ãƒ¼ (`publish.yml`)

ã“ã‚Œã‚‰ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€æœŸå¾…ã•ã‚Œã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ  / ãƒ„ãƒ¼ãƒ«ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚„ãƒªãƒªãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯ã‚’ç¤ºã™å®Ÿå‹™ä¸Šã®åŸºæº–ã§ã™ã€‚

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° ğŸ©º

| ç—‡çŠ¶ | ç¢ºèª / ä¿®æ­£ |
| --- | --- |
| ãƒã‚¤ã‚¯æ¨©é™ãŒæ‹’å¦ã•ã‚ŒãŸ | ãƒ–ãƒ©ã‚¦ã‚¶ã§å…ƒã®ã‚ªãƒªã‚¸ãƒ³ã«å¯¾ã—ã¦ãƒã‚¤ã‚¯æ¨©é™ãŒè¨±å¯ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª |
| ã‚¢ã‚»ãƒƒãƒˆã®èª­ã¿è¾¼ã¿å¤±æ•—ï¼ˆ`.onnx`, `.wasm`, `.mjs`, workletï¼‰ | `baseAssetPath` / `onnxWASMBasePath` ã‚’æ­£ã—ãè¨­å®šã—ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿéš›ã«é…ä¿¡ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª |
| `onnxruntime-web` ã®æ–°ã—ã„ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§å•é¡ŒãŒç™ºç”Ÿ | `.wasm` ã ã‘ã§ãªã `.mjs` ã‚‚é…ä¿¡ |
| ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºãŒå®‰å…¨ã§ãªã„ã‚ªãƒªã‚¸ãƒ³ä¸Š | ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒã‚¤ã‚¯ API ã¯ä¸€èˆ¬ã«å®‰å…¨ãªã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆ`https` ã¾ãŸã¯ `localhost`ï¼‰ã‚’è¦æ±‚ |
| ãƒ“ãƒ«ãƒ‰æ™‚ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å•é¡Œ | [ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.vad.ricky0123.com/user-guide/browser/) ã®ãƒãƒ³ãƒ‰ãƒ«ã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§ |
| Next.js çµ±åˆã®å•é¡Œ | [`examples/nextjs/next.config.js`](examples/nextjs/next.config.js) ã«ã‚ã‚‹è¨­å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ã„ã€é™çš„ã‚¢ã‚»ãƒƒãƒˆã®é…ä¿¡ãƒ‘ã‚¹ã‚’ç¢ºèª |

## ã‚¹ãƒãƒ³ã‚µãƒ¼ã‚·ãƒƒãƒ— â¤ï¸

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç¶™ç¶šçš„ãªé–‹ç™ºã‚’æ”¯æ´ã—ã¦ãã ã•ã„ã€‚ç‰¹ã«å•†ç”¨è£½å“ãŒã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã—ã¦ã„ã‚‹å ´åˆã¯ã€æ”¯æ´ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚ [![Become a Sponsor](https://img.shields.io/static/v1?label=Become%20a%20Sponsor&message=%E2%9D%A4&logo=GitHub&style=flat&color=d42f2d)](https://github.com/sponsors/ricky0123)

## â¤ï¸ Support

| Donate | PayPal | Stripe |
|---|---|---|
| [![Donate](https://img.shields.io/badge/Donate-LazyingArt-0EA5E9?style=for-the-badge&logo=ko-fi&logoColor=white)](https://chat.lazying.art/donate) | [![PayPal](https://img.shields.io/badge/PayPal-RongzhouChen-00457C?style=for-the-badge&logo=paypal&logoColor=white)](https://paypal.me/RongzhouChen) | [![Stripe](https://img.shields.io/badge/Stripe-Donate-635BFF?style=for-the-badge&logo=stripe&logoColor=white)](https://buy.stripe.com/aFadR8gIaflgfQV6T4fw400) |

## Node ã‚µãƒãƒ¼ãƒˆã«é–¢ã™ã‚‹é‡è¦ãªãŠçŸ¥ã‚‰ã› - 2024å¹´10æœˆ ğŸ“¢

`ricky0123/vad-node`ï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ node ç’°å¢ƒå‘ã‘éŸ³å£°æ´»å‹•æ¤œå‡ºãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼‰ã®ã‚µãƒãƒ¼ãƒˆã‚’æ®µéšçš„ã«çµ‚äº†ã—ã¾ã™ã€‚ä»Šå¾Œã€ã“ã® node ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’å…¬é–‹ã™ã‚‹äºˆå®šã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ä»¥ä¸‹ã®ç†ç”±ã§ã“ã®åˆ¤æ–­ã‚’ã—ã¾ã—ãŸã€‚

- ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å…ƒã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®éŸ³å£°æ´»å‹•æ¤œå‡ºã§ã—ãŸã€‚èª°ã‹ã®è¦æœ›ã§ node ã‚µãƒãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸãŒã€ç§ã«ã¯ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è²»ã‚„ã›ã‚‹æ™‚é–“ãŒé™ã‚‰ã‚Œã¦ãŠã‚Šã€`ricky0123/vad-node` ã‚’ç¸®å°ã™ã‚‹ã“ã¨ã§ `ricky0123/vad-web` ã«é›†ä¸­ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
- é–‹ç™ºè€…å€‹ã€…äººã«ã¨ã£ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ç‹¬è‡ªã®éŸ³å£°æ´»å‹•æ¤œå‡ºã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œã‚‹ã“ã¨ã®ã»ã†ãŒã€onnxruntime-webã€Audio Worklet ãªã©ã‚’ç¿’å¾—ã—ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰å®Ÿè£…ã‚’ä½œã‚‹ã‚ˆã‚Šå®¹æ˜“ã§ã™ã€‚ã—ãŸãŒã£ã¦ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã¨ã£ã¦ `ricky0123/vad-web` ã®ã»ã†ãŒä¾¡å€¤ãŒé«˜ã„ã§ã™ã€‚
- ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ã¨ node ç”¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã§ã‚³ãƒ¼ãƒ‰ã‚’å…±æœ‰ã™ã‚‹ã®ã¯ã€éŸ³å£°æ´»å‹•æ¤œå‡ºãƒ¢ãƒ‡ãƒ«ã®å®Ÿè¡Œã¨åˆ©ç”¨ã§ç’°å¢ƒå·®åˆ†ãŒå¤§ããã€æ‰±ã„ã«ãã„ãŸã‚ã§ã™ã€‚
- [ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ](https://uaux2a2ppfv.typeform.com/to/iJG2gCQv) ã®çµæœã€ã»ã¨ã‚“ã©ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ `ricky0123/vad-web`ï¼ˆå ´åˆã«ã‚ˆã£ã¦ã¯ `ricky0123/vad-react`ï¼‰ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ã¦ã„ã¾ã™ã€‚

## ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— ğŸ›£ï¸

ç¾åœ¨ã®æ–¹é‡ï¼ˆãƒªãƒã‚¸ãƒˆãƒªçŠ¶æ…‹ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ¼æ³¨è¨˜ã«åŸºã¥ãï¼‰:

- ãƒ–ãƒ©ã‚¦ã‚¶ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ APIï¼ˆ`@ricky0123/vad-web`, `@ricky0123/vad-react`ï¼‰ã«å¼•ãç¶šãæ³¨åŠ›
- ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚„å„ç¨®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚µãƒ³ãƒ—ãƒ«ã®æ”¹å–„ç¶™ç¶š
- ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚¿ãƒ¼å‘ã‘ï¼é–‹ç™ºè€…å‘ã‘ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ test-site ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®æ”¹å–„
- `i18n/` é…ä¸‹ã®ç¿»è¨³ README ã®è¿½åŠ ã¨ä¿å®ˆ

## ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ ğŸ¤

- é–‹ç™ºã‚¬ã‚¤ãƒ‰: [docs.vad.ricky0123.com/developer-guide/hacking](https://docs.vad.ricky0123.com/developer-guide/hacking/)
- ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ issue / PR ã‚’ä½œæˆ: [github.com/ricky0123/vad/issues](https://github.com/ricky0123/vad/issues)
- å‚è€ƒã®ãŸã‚ã€[HACKING.md](HACKING.md) ã‚’å‚ç…§

## å‚ç…§ ğŸ“š

1. Silero VAD ãƒªãƒã‚¸ãƒˆãƒª: [github.com/snakers4/silero-vad](https://github.com/snakers4/silero-vad)

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ ğŸ“„

- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ©ã‚¤ã‚»ãƒ³ã‚¹: ISCï¼ˆ[LICENSE](LICENSE) ã‚’å‚ç…§ï¼‰
